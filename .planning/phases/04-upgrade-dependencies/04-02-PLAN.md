---
phase: 04-upgrade-dependencies
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified: [package.json, pnpm-lock.yaml]
autonomous: true

must_haves:
  truths:
    - "All minor-level dependencies are upgraded to latest minor versions within current major"
    - "Project builds successfully with upgraded minors"
    - "Development server runs without errors after minor upgrades"
    - "No breaking changes introduced by minor updates"
  artifacts:
    - path: "package.json"
      provides: "Updated minor versions"
      contains: "latest minor versions within major boundaries"
    - path: "pnpm-lock.yaml"
      provides: "Lock file with resolved minor versions"
      min_lines: 100
  key_links:
    - from: "package.json"
      to: "pnpm-lock.yaml"
      via: "pnpm install"
      pattern: "lockfileVersion"
---

<objective>
Upgrade all minor-level dependencies to their latest versions within current major version boundaries to benefit from new features and improvements without breaking changes.

Purpose: Minor updates introduce new features and improvements while maintaining backward compatibility according to semver. This prepares the codebase for major upgrades in subsequent plans.
Output: Updated package.json and pnpm-lock.yaml with latest minor versions, verified through successful build, type-check, and manual testing.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-upgrade-dependencies/04-RESEARCH.md
@.planning/phases/04-upgrade-dependencies/04-01-SUMMARY.md
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Identify and apply minor upgrades</name>
  <files>package.json, pnpm-lock.yaml</files>
  <action>
Run `npx taze minor` (dry run) to identify all minor-level updates. Expected packages based on research:
- @unhead/vue: 2.0.10 → 2.1.2
- ofetch: 1.4.1 → 1.5.1
- reka-ui: 2.3.0 → 2.8.0 (CRITICAL: used for filter checkboxes in Phase 1/2)
- valibot: 1.1.0 → 1.2.0
- vue-router: 4.5.1 → 4.6.4 (stay within v4, v5 is major)
- @types/node: 22.14.0 → 22.19.7 (stay within v22)
- eslint: 9.28.0 → 9.39.2
- simple-git: 3.27.0 → 3.30.0
- unplugin-vue-components: 28.7.0 → 28.8.0 (stay within v28)
- vite: 6.3.5 → 6.4.1 (stay within v6)
- vite-plugin-pwa: 1.0.0 → 1.2.0

Run `npx taze minor -w` to write updates to package.json.

Run `pnpm install` to update lock file. Watch for peer dependency warnings.
  </action>
  <verify>
`npx taze minor` displays list of minor updates.
`npx taze minor -w` modifies package.json.
`pnpm install` completes without errors (warnings are acceptable).
  </verify>
  <done>
package.json contains updated minor versions.
pnpm-lock.yaml is updated.
No installation errors occurred.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify build and type-check</name>
  <files>package.json, pnpm-lock.yaml</files>
  <action>
Run verification commands in order:

1. `pnpm type-check` - TypeScript compilation must pass
2. `pnpm lint` - Linting must pass (eslint upgraded to 9.39.2)
3. `pnpm build` - Production build must succeed

If any command fails, document the error. Do NOT proceed to dev server test if build fails.

Check for deprecation warnings in output - document but do not block on them.
  </action>
  <verify>
`pnpm type-check` exits with code 0.
`pnpm lint` exits with code 0.
`pnpm build` exits with code 0 and produces dist/ output.
  </verify>
  <done>
Type checking passes.
Linting passes with upgraded eslint.
Production build succeeds.
  </done>
</task>

<task type="auto">
  <name>Task 3: Test development server and commit</name>
  <files>package.json, pnpm-lock.yaml</files>
  <action>
Start development server with `pnpm dev` and verify it starts successfully. Let it run for 15 seconds to ensure stability, then terminate.

If dev server starts successfully, commit the changes:

```bash
git add package.json pnpm-lock.yaml
git commit -m "chore(deps): upgrade minor-level dependencies

dependencies:
- @unhead/vue: 2.0.10 → 2.1.2
- ofetch: 1.4.1 → 1.5.1
- reka-ui: 2.3.0 → 2.8.0
- valibot: 1.1.0 → 1.2.0
- vue-router: 4.5.1 → 4.6.4

devDependencies:
- @types/node: 22.14.0 → 22.19.7
- eslint: 9.28.0 → 9.39.2
- simple-git: 3.27.0 → 3.30.0
- unplugin-vue-components: 28.7.0 → 28.8.0
- vite: 6.3.5 → 6.4.1
- vite-plugin-pwa: 1.0.0 → 1.2.0

All updates stay within current major versions.
Verified through build, type-check, lint, and dev server."
```

If dev server fails to start, DO NOT commit and document the error for debugging.
  </action>
  <verify>
`pnpm dev` starts successfully and shows ready message.
Git commit is created with detailed message.
`git log -1` shows the commit.
  </verify>
  <done>
Development server starts and runs without errors.
Minor upgrades are committed to git.
Commit message lists all upgraded packages.
  </done>
</task>

</tasks>

<verification>
1. Run `pnpm outdated` - minor packages within current majors should no longer appear
2. Run full verification suite: `pnpm type-check && pnpm lint && pnpm build && pnpm dev`
3. Check git log - commit for minor upgrades exists
4. Manually test filter feature in browser - ensure reka-ui upgrade didn't break checkboxes
</verification>

<success_criteria>
- [ ] All 11 minor-level dependencies upgraded to latest versions within current majors
- [ ] package.json and pnpm-lock.yaml updated and committed
- [ ] Build, type-check, lint, and dev server all pass successfully
- [ ] reka-ui upgrade (2.3.0 → 2.8.0) does not break existing filter checkboxes
- [ ] Git history contains clean commit documenting minor upgrades
</success_criteria>

<output>
After completion, create `.planning/phases/04-upgrade-dependencies/04-02-SUMMARY.md`
</output>
